@model BelanjaVM

@{
    ViewData["Title"] = "Akun | Belanja";
}

<div class="row">
    <h3>Tahun : </h3>
    <select name="tahun" id="tahun">
        @foreach (var tahun in Enumerable.Range(DateTime.Now.Year - 5, 11))
        {
            if (tahun == Model.Tahun)
            {
                <option value="@tahun" selected="true">@tahun</option>
            }
            else
            {
                <option value="@tahun">@tahun</option>
            }
        }
    </select>
</div>

<h1>Jenis Akun</h1>
<table class="table">
    <thead>
        <tr>
            <th>Kode</th>
            <th>Uraian</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var jenisAkun in Model.DaftarJenisAkun)
        {
            <tr>
                <td>@Model.KodeJenisAkun(jenisAkun)</td>
                <td>@jenisAkun.Uraian</td>
            </tr>
        }
    </tbody>
</table>

<h1>Kelompok Akun</h1>
<table class="table">
    <thead>
        <tr>
            <th>Kode</th>
            <th>Uraian</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var kelompokAkun in Model.DaftarKelompokAkun)
        {
            <tr>
                <td>@Model.KodeJenisAkun(kelompokAkun.JenisAkun).@kelompokAkun.Kode</td>
                <td>@kelompokAkun.Uraian</td>
            </tr>
        }
    </tbody>
</table>

<h1>Golongan Akun</h1>
<table class="table">
    <thead>
        <tr>
            <th>Kode</th>
            <th>Uraian</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var golonganAkun in Model.DaftarGolonganAkun)
        {
            <tr>
                <td>@Model.KodeJenisAkun(golonganAkun.KelompokAkun.JenisAkun).@golonganAkun.Kode</td>
                <td>@golonganAkun.Uraian</td>
            </tr>
        }
    </tbody>
</table>

<h1>Akun</h1>
<table class="table">
    <thead>
        <tr>
            <th>Kode</th>
            <th>Uraian</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var akun in Model.DaftarAkun)
        {
            <tr>
                <td>@Model.KodeJenisAkun(akun.JenisAkun).@akun.Kode</td>
                <td>@akun.Uraian</td>
            </tr>
        }
    </tbody>
</table>

<ul>
    @foreach(var jenisAkun in Model.DaftarJenisAkun)
    {
        <partial name="_JenisAkunPartial" model="(jenisAkun, Model.KodeJenisAkun(jenisAkun))" />
    }
</ul>

@section Scripts {
    <script type="text/javascript">
        $("select#tahun").on('change', function () {
            const url = '/Dashboard/Akun/Belanja';
            const tahun = $('select#tahun').val()

            location.href = url + `/${tahun}`;
        });
    </script>
}